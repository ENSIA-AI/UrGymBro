<!DOCTYPE html>
<html>

<head>
    <title>
        Profile
    </title>
    <link rel="stylesheet" href="PROFILE.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <script href="script.js"></script>

</head>

<body>

    <div id="sidebar">
        <div id="profile-content">
            <img src="3d-portrait-businessman_23-2150793877.avif" width="100" height="100" alt="PROFILE PICTURE">
            <span> User7467 <br> ID: 122343564</span>
        </div>
        <div class="sidebar_elements">
            <a href="Profile.html" id="sd">PROFILE</a>
            <a href="homepage.html" id="sd">HOME</a>
            <a href="maps.html" id="sd"> GYM LOCATIONS</a>
            <a href="products.html" id="sd">PRODUCTS</a>
            <a href="food.html" id="sd">FOOD</a>
            <a href="savings.html" id="sd">SAVINGS</a>
            <a href="settings.html" id="sd">SETTINGS</a>
            <a href="About_Us_webdev.html" id="sd">ABOUT US</a>
            <a href="help.html" id="sd">HELP?</a>
            <a href="homepage.html"><img src="Logo red and gray.svg" alt="UR" width="120" height="80"> </a>
        </div>
    </div>


    <div class="minibody">

        <div id="profil">
            <h1 class="profil">WELCOME TO YOUR ZONE!</h1>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>

        <script>
            var textWrapper = document.querySelector('.profil');
            textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");

            anime.timeline({ loop: true })
                .add({
                    targets: '.profil .letter',
                    scale: [4, 1],
                    opacity: [0, 1],
                    translateZ: 0,
                    easing: "easeOutExpo",
                    duration: 950,
                    delay: (el, i) => 70 * i
                }).add({
                    targets: '.profil',
                    opacity: 0,
                    duration: 1000,
                    easing: "easeOutExpo",
                    delay: 1000
                });
        </script>

        <div class="profile_all">

            <div class="profile_text">
                <div><b>Username:</b></div>
                <div><b>Email:</b></div>
                <div><b>Gender:</b></div>
                <div><b>Weight:</b></div>
                <div><b>Height:</b></div>
                <div><b>BMI:</b></div>
            </div>

          <style>
    .error-message {
        color: red;
        font-size: 14px;
        margin-top: 5px;
    }

    #saveChanges,
    #cancelChanges {
        display: none;
    }
</style>

<div class="profile_txt" id="profile_txt">
    <div class="profile_inputs">
        <div id="display_username"> <input type="text" id="username" class="edit-mode" value="user7874"  disabled>
            <span class="edit-icon" onclick="toggleEditMode('username')" 
                id="edit"><img src="icons8-edit.svg " width="20" height="20"></span>
            
        </div>
        <div id="username-error" class="error-message"></div>
    </div>

    <div class="profile_inputs">
        <div id="display_email"><input type="email" id="email" class="edit-mode" value="john@example.com"  disabled>
            <span class="edit-icon" onclick="toggleEditMode('email')" 
                id="edit"><img src="icons8-edit.svg " width="20" height="20"></span>
            
        </div>
        <div id="email-error" class="error-message"></div>
    </div>

    <div class="profile_inputs">
        <select id="gender" name="Gender" disabled>
            <option value="male">male</option>
            <option value="female">female</option>
        </select>  
        <span class="edit-icon" onclick="toggleEditMode('gender')" id="edit">
            <img src="icons8-edit.svg " width="20" height="20">
        </span>
    </div>

    <div class="profile_inputs">
        <div id="display_weight"> 
            <input type="text" id="weight" class="edit-mode" value="70"  disabled>
            <span class="edit-icon" onclick="toggleEditMode('weight')" 
                id="edit"><img src="icons8-edit.svg " width="20" height="20"></span>
            
        </div>
        <div id="weight-error" class="error-message"></div>
    </div>

    <div class="profile_inputs">
        <div id="display_height"> 
            <input type="text" id="height" class="edit-mode" value="1.87" disabled>
            <span class="edit-icon" onclick="toggleEditMode('height')" 
                id="edit"><img src="icons8-edit.svg " width="20" height="20"></span>
            
        </div>
        <div id="height-error" class="error-message"></div>
    </div>

    <div class="profile_inputs">
        <input type="text" id="BMI" class="edit-mode" value="22.5" disabled>
    </div>
</div>

<button id="saveChanges">Save</button>
<button id="cancelChanges">Cancel</button>

<script>
    let originalState = {};

    function toggleEditMode(fieldId) {
        const field = document.getElementById(fieldId);
        const editIcon = field.nextElementSibling.querySelector(".edit-icon");

        // Save the original state before entering edit mode
        if (!originalState[fieldId]) {
            originalState[fieldId] = field.value;
        }

        field.disabled = !field.disabled;
        clearErrorMessage(fieldId);
        toggleButtons();
    }

    function toggleButtons() {
        const saveChangesBtn = document.getElementById('saveChanges');
        const cancelChangesBtn = document.getElementById('cancelChanges');
        const editIcons = document.querySelectorAll('.edit-icon');

        let isEditing = false;

        // Check if any field is in edit mode
        editIcons.forEach(icon => {
            const field = icon.parentNode.firstChild;
            if (field.disabled === false) {
                isEditing = true;
            }
        });

        // Toggle buttons based on editing state
        saveChangesBtn.style.display = isEditing ? 'inline-block' : 'none';
        cancelChangesBtn.style.display = isEditing ? 'inline-block' : 'none';
    }

    function clearErrorMessage(fieldId) {
        const errorElement = document.getElementById(`${fieldId}-error`);
        if (errorElement) {
            errorElement.textContent = '';
        }
    }

    function saveChanges() {
        const usernameField = document.getElementById('username');
        const emailField = document.getElementById('email');
        const genderField = document.getElementById('gender');
        const weightField = document.getElementById('weight');
        const heightField = document.getElementById('height');

        // Perform validation
        if (!validateForm(
            usernameField.value,
            emailField.value,
            genderField.value,
            weightField.value,
            heightField.value
        )) {
            return;
        }

        // Save changes to the server (you should replace this with your actual save logic)
        // For illustration purposes, let's assume there's a function saveChangesToServer
        saveChangesToServer(
            usernameField.value,
            emailField.value,
            genderField.value,
            weightField.value,
            heightField.value
        );

        // Update the original state to reflect the latest changes
        originalState.username = usernameField.value;
        originalState.email = emailField.value;
        originalState.gender = genderField.value;
        originalState.weight = weightField.value;
        originalState.height = heightField.value;

        // Exit edit mode
        toggleEditMode('username');
        toggleEditMode('email');
        toggleEditMode('gender');
        toggleEditMode('weight');
        toggleEditMode('height');
    }

    function cancelChanges() {
        // Revert input values to their original state if not changed
        revertIfNotChanged('username');
        revertIfNotChanged('email');
        revertIfNotChanged('gender');
        revertIfNotChanged('weight');
        revertIfNotChanged('height');

        // Exit edit mode without saving changes
        toggleEditMode('username');
        toggleEditMode('email');
        toggleEditMode('gender');
        toggleEditMode('weight');
        toggleEditMode('height');
    }

    function revertIfNotChanged(fieldId) {
        const field = document.getElementById(fieldId);
        if (originalState[fieldId] !== undefined && field.value !== originalState[fieldId]) {
            field.value = originalState[fieldId];
        }
    }

    function validateForm(username, email, gender, weight, height) {
        // Simple client-side validation for illustration purposes
        if (username.trim() === '') {
            document.getElementById("username-error").innerHTML= 'Username cannot be empty.';
            return false;
        }

        // Validate email using a regular expression
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email.trim())) {
            displayErrorMessage('email', 'Invalid email address.');
            return false;
        }

        // Add more validation as needed

        return true;
    }

    function displayErrorMessage(fieldId, message) {
        const errorElement = document.getElementById(`${fieldId}-error`);
        if (errorElement) {
            errorElement.textContent = message;
            errorElement.classList.add('error-message');
        }
    }

    // Add event listeners for save and cancel buttons
    const saveChangesBtn = document.getElementById('saveChanges');
    const cancelChangesBtn = document.getElementById('cancelChanges');

    saveChangesBtn.addEventListener('click', saveChanges);
    cancelChangesBtn.addEventListener('click', cancelChanges);
</script>

        
        

</body>



</html>